{% extends "default.html.twig" %}

{% block title %}Panel Admin{% endblock %}

{% block stylesheet %}
<link href="/../public/css/dashboard.css" rel="stylesheet">
{% endblock %}

{% block header %}
{% include 'header.html.twig' %}
{% endblock %}

{% block body %}
<div class="requestContainer">
    {% for RequestPassPro in requestPassProData %}
    {% set requestId = RequestPassPro.IdRequest %}
    <div class="request">
        <div class="infoUser">
            <div class="name">
                <img class="icon2" src="data:image;base64,{{ RequestPassPro.UserPicture }}" alt="icon"
                    onclick="openModal(this)">
                <h1>{{ RequestPassPro.FirstName }}</h1>
                <h1>{{ RequestPassPro.LastName }}</h1>
                <p>{{ RequestPassPro.UserAge }} ans</p>
            </div>
            <div class="job">
                <p>Métier : {{ RequestPassPro.UserJob }}</p>
            </div>
            <div class="email">
                <p>Email : {{ RequestPassPro.Email }}</p>
            </div>
            <div class="adresse">
                <p>Adresse : {{ RequestPassPro.UserAdress }}</p>
            </div>
        </div>
        <div class="description">
            <h3>Contenu de la demande pour passez Professionnel :</h3>
            <p>{{ RequestPassPro.Description | nl2br }}</p>
        </div>
        <div class="identityCard">
            <img class="icon" src="data:image;base64,{{ RequestPassPro.IdentityCardRecto }}" alt="icon"
                onclick="openModal(this)">
            <img class="icon" src="data:image;base64,{{ RequestPassPro.IdentityCardVerso }}" alt="icon"
                onclick="openModal(this)">
        </div>
        <div class="button">
            <div class="buttonValid">
                <form action="/dashboard" method="post">
                    <input type="hidden" name="IdRequest" value="{{ RequestPassPro.IdRequest }}">
                    <button name="requestValid" type="submit" id="inputField2">Valider la demande</button>
                </form>
            </div>
            <div class="buttonInvalid">
                <form action="/dashboard" method="post">
                    <input type="hidden" name="IdRequest" value="{{ RequestPassPro.IdRequest }}">
                    <textarea name="rejectReason" placeholder="Raison du refus" rows="1" cols="30"></textarea>
                    <button name="requestInvalid" type="submit" id="inputField2">Refuser la demande</button>
                </form>
            </div>
            <div class="DownloadPdf">
                <form action="/dashboard" method="post">
                    <input type="hidden" name="IdRequest" value="{{ requestId }}">
                    <button type="submit" name="downloadPDFAndImages" id="inputField2">Télécharger PDF et Images</button>
                </form>
            </div>
        </div>
    </div>
    {% endfor %}
</div>

<div class="tableUserPro">
    <table>
        <tr>
            <th>FirstName</th>
            <th>LastName</th>
            <th>ProfilPicture</th>
            <th>Supprimer Pro</th>
        </tr>
        {% for User in userPro %}
        <tr>
            <td>{{ User.FirstName }}</td>
            <td>{{ User.LastName }}</td>
            <td><img class="icon" src="data:image;base64,{{ User.ProfilPicture }}" alt="icon" onclick="openModal(this)">
            </td>
            <td>
                <form action="/dashboard" method="post">
                    <input type="hidden" name="IdUser" value="{{ User.IdUser }}">
                    <button type="submit" name="deletePro">Supprimer des pro</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </table>
</div>


<div id="myModal" class="modal">
    <span class="close" onclick="closeModal()">&times;</span>
    <img class="modal-content" id="img01">
</div>
{% endblock %}

{% block footer %}{% endblock %}

{% block scripts %}
<script src="/../public/js/modalImageRequest.js"></script>
{% endblock %}
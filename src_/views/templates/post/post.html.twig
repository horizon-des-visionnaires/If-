{% extends "default.html.twig" %}

{% block title %}Post de {{ firstName }} {{ lastName }}{% endblock %}

{% block stylesheet %}
<link href="/projet/src/public/css/post.css" rel="stylesheet">
{% endblock %}

{% block header %}
{% include 'header.html.twig' %}
{% endblock %}

{% block body %}
<div class="homePost">
    {% for Post in postData %}
    <div class="post">
        <div class="user-info">
            <img class="user-picture" src="data:image;base64,{{ Post.ProfilPicture }}" alt="profile picture">
            <h1>{{ Post.FirstName }} {{ Post.LastName }}</h1>
        </div>
        <p class="datePost">{{ Post.RelativeDatePost }}</p>
        <div class="contentPost">
            <h2>{{ Post.TitlePost }}</h2>
            <p>
                {% set contentLines = Post.ContentPost | split("\n") %}
                {% for i in 0..2 %}
                    {{ contentLines[i] }}<br>
                {% endfor %}
                {% if contentLines | length > 3 %}
                    <span id="moreContent{{ loop.index }}" style="display:none;">
                        {% for i in 3..(contentLines | length - 1) %}
                            {{ contentLines[i] }}<br>
                        {% endfor %}
                    </span>
                    <button id="btn-voir-plus-{{ loop.index }}" class="btn-voir-plus" onclick="toggleVisibility('moreContent{{ loop.index }}', 'btn-voir-plus-{{ loop.index }}')">Voir plus</button>
                {% endif %}
            </p>
        </div>
        {% for picture in Post.PicturesPost %}
            <img class="icon" src="data:image;base64,{{ picture }}" alt="icon">
        {% endfor %}
    </div>
    {% endfor %}
</div>
{% endblock %}

{% block footer %}{% endblock %}

{% block scripts %}
<script src="/projet/src/public/js/viewMore.js"></script>
{% endblock %}